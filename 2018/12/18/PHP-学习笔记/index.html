<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta http-equiv="Content-Language" content="zh-cn">
    <meta charset="utf-8">
    
    
    <link rel="canonical" href="http://blog.iwxyi.com/2018/12/18/PHP-学习笔记/">
    
    
    <title>PHP-学习笔记 | 云笺 | 一些技术摘要和写作技巧</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    
    <meta name="theme-color" content="#77AAFF">
    
    
    <meta name="keywords" content="学习笔记,PHP">
    
    

    

    <!-- Baidu Push -->
<script>
	(function(){
		var bp = document.createElement('script');
		var curProtocol = window.location.protocol.split(':')[0];
		if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
		}
		else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
		}
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(bp, s);
	})();

	var _hmt = _hmt || [];
</script>



    
    <meta name="description" content="PHP 基础教程入门输出 echo123&amp;lt;?php	echo &quot;Hello World!&quot;; ?&amp;gt;">
<meta name="keywords" content="学习笔记,PHP">
<meta property="og:type" content="article">
<meta property="og:title" content="PHP-学习笔记">
<meta property="og:url" content="http://blog.iwxyi.com/2018/12/18/PHP-学习笔记/index.html">
<meta property="og:site_name" content="云笺">
<meta property="og:description" content="PHP 基础教程入门输出 echo123&amp;lt;?php	echo &quot;Hello World!&quot;; ?&amp;gt;">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-10-13T08:22:31.121Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PHP-学习笔记">
<meta name="twitter:description" content="PHP 基础教程入门输出 echo123&amp;lt;?php	echo &quot;Hello World!&quot;; ?&amp;gt;">
    
        <link rel="alternate" type="application/atom+xml" title="云笺" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link id="style" rel="stylesheet" href="/css/style.css?v=3.0">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    
            
</head>

<body>
    <div id="loading" class="active"></div>
    <aside id="menu"  class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" >
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="avatar">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname" id="name">命燃芯乂</h5>
          
            <div id="yiyanmotto" class="motto">&nbsp;</div>
          
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
              <li class="waves-block waves-effect">
                  <a href="/"  >
                    <i class="icon icon-lg icon-home"></i>
                    <span>主 页</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/archives"  >
                    <i class="icon icon-lg icon-archives"></i>
                    <span>归 档</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/categories"  >
                    <i class="icon icon-lg icon-th-list"></i>
                    <span>分 类</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/tags"  >
                    <i class="icon icon-lg icon-tags"></i>
                    <span>标 签</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/about"  >
                    <i class="icon icon-lg icon-link"></i>
                    <span>相 关</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
      <div class="nav2">
          
              <a class="nav2item" data-title="Email" href="mailto:wxy@iwxyi.com" target="_parent"title="Email" >
                <i class="icon icon-lg icon-envelope-o envelope-o"></i>
              </a>
          
              <a class="nav2item" data-title="Github" href="https://github.com/mrxy001" target="_blank"title="Github" >
                <i class="icon icon-lg icon-github github"></i>
              </a>
          
              <a class="nav2item" data-title="微博" href="https://weibo.com/u/6065548594" target="_blank"title="微博" >
                <i class="icon icon-lg icon-weibo weibo"></i>
              </a>
          

            </div>

      </ul>

    </div>
  </div>

</aside>


    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">PHP-学习笔记</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        <a href="../../atom.xml" target="_blank" class="header-icon waves-effect waves-circle waves-light" id="Rss">
            <i class="icon icon-lg icon-rss"></i>
        </a>
    </div>
</header>
<header class="content-header post-header">
    
    
    <div class="container fade-scale">
        <div id="myheader">
            <h1 class="title">
                
            </h1>
            <h5 class="subtitle">
                
                
            </h5>
        </div>
    </div>

</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#PHP-基础教程"><span class="post-toc-number">1.</span> <span class="post-toc-text">PHP 基础教程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#入门"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">入门</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#输出-echo"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">输出 echo</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#注释"><span class="post-toc-number">1.1.2.</span> <span class="post-toc-text">注释</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#支持中文"><span class="post-toc-number">1.1.3.</span> <span class="post-toc-text">支持中文</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#变量"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">变量</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#全局变量"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">全局变量</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#宏定义-define"><span class="post-toc-number">1.2.1.1.</span> <span class="post-toc-text">宏定义 define</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#数据类型"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">数据类型</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PHP对象：class（类）"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">PHP对象：class（类）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#字符串"><span class="post-toc-number">1.2.4.</span> <span class="post-toc-text">字符串</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#strlen"><span class="post-toc-number">1.2.4.1.</span> <span class="post-toc-text">strlen</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#strpos"><span class="post-toc-number">1.2.4.2.</span> <span class="post-toc-text">strpos</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#str-replace"><span class="post-toc-number">1.2.4.3.</span> <span class="post-toc-text">str_replace</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#正则表达式"><span class="post-toc-number">1.2.4.4.</span> <span class="post-toc-text">正则表达式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#正则替换"><span class="post-toc-number">1.2.4.4.1.</span> <span class="post-toc-text">正则替换</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#正则匹配"><span class="post-toc-number">1.2.4.4.2.</span> <span class="post-toc-text">正则匹配</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#字符串中变量"><span class="post-toc-number">1.2.4.5.</span> <span class="post-toc-text">字符串中变量</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#字符串中的表达式"><span class="post-toc-number">1.2.4.5.1.</span> <span class="post-toc-text">字符串中的表达式</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#常量"><span class="post-toc-number">1.2.5.</span> <span class="post-toc-text">常量</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#rand-随机数"><span class="post-toc-number">1.2.6.</span> <span class="post-toc-text">rand() 随机数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#编码"><span class="post-toc-number">1.2.7.</span> <span class="post-toc-text">编码</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PHP-运算符：同C系"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">PHP 运算符：同C系</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#foreach语句"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">foreach语句</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#函数（函数名对大小写不敏感）"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">函数（函数名对大小写不敏感）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#可选参数"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">可选参数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#可变参数"><span class="post-toc-number">1.4.2.</span> <span class="post-toc-text">可变参数</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#数组"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">数组</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#三种数组类型"><span class="post-toc-number">1.5.1.</span> <span class="post-toc-text">三种数组类型</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#foreach-遍历"><span class="post-toc-number">1.5.2.</span> <span class="post-toc-text">foreach 遍历</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#数组排序函数"><span class="post-toc-number">1.5.3.</span> <span class="post-toc-text">数组排序函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#超全局变量"><span class="post-toc-number">1.5.4.</span> <span class="post-toc-text">超全局变量</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#GLOBALS"><span class="post-toc-number">1.5.4.1.</span> <span class="post-toc-text">$GLOBALS</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#SERVER"><span class="post-toc-number">1.5.4.2.</span> <span class="post-toc-text">$_SERVER</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#REQUEST"><span class="post-toc-number">1.5.4.3.</span> <span class="post-toc-text">$_REQUEST</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#POST"><span class="post-toc-number">1.5.4.4.</span> <span class="post-toc-text">$_POST</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#常用数组函数"><span class="post-toc-number">1.5.5.</span> <span class="post-toc-text">常用数组函数</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#PHP-高级教程"><span class="post-toc-number">2.</span> <span class="post-toc-text">PHP 高级教程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PHP-多维数组"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">PHP 多维数组</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PHP-日期"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">PHP 日期</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#date-函数"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">date() 函数</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#自动版权年份"><span class="post-toc-number">2.2.1.1.</span> <span class="post-toc-text">自动版权年份</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#获得时区"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">获得时区</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#mktime-函数"><span class="post-toc-number">2.2.3.</span> <span class="post-toc-text">mktime() 函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#strtotime-函数"><span class="post-toc-number">2.2.4.</span> <span class="post-toc-text">strtotime() 函数</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PHP-Include"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">PHP Include</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PHP-文件"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">PHP 文件</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#读取文件"><span class="post-toc-number">2.4.1.</span> <span class="post-toc-text">读取文件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#读取单行文件-fgets"><span class="post-toc-number">2.4.2.</span> <span class="post-toc-text">读取单行文件 - fgets()</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#检查-End-Of-File-feof"><span class="post-toc-number">2.4.3.</span> <span class="post-toc-text">检查 End-Of-File - feof()</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#读取单字符-fgetc"><span class="post-toc-number">2.4.4.</span> <span class="post-toc-text">读取单字符 - fgetc()</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#写入文件-fwrite"><span class="post-toc-number">2.4.5.</span> <span class="post-toc-text">写入文件 - fwrite()</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PHP-文件上传"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">PHP 文件上传</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#文件上传-网页端"><span class="post-toc-number">2.5.1.</span> <span class="post-toc-text">文件上传 网页端</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#上传脚本-服务端"><span class="post-toc-number">2.5.2.</span> <span class="post-toc-text">上传脚本 服务端</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PHP-Cookies"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">PHP Cookies</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#setcookie-函数"><span class="post-toc-number">2.6.1.</span> <span class="post-toc-text">setcookie() 函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#COOKIE-变量"><span class="post-toc-number">2.6.2.</span> <span class="post-toc-text">$_COOKIE 变量</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#isset-函数"><span class="post-toc-number">2.6.3.</span> <span class="post-toc-text">isset() 函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#删除-cookie"><span class="post-toc-number">2.6.4.</span> <span class="post-toc-text">删除 cookie</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PHP-Sessions"><span class="post-toc-number">2.7.</span> <span class="post-toc-text">PHP Sessions</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#session-start"><span class="post-toc-number">2.7.1.</span> <span class="post-toc-text">session_start()</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SESSION-变量"><span class="post-toc-number">2.7.2.</span> <span class="post-toc-text">$_SESSION 变量</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#isset-函数-1"><span class="post-toc-number">2.7.3.</span> <span class="post-toc-text">isset() 函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#unset-函数"><span class="post-toc-number">2.7.4.</span> <span class="post-toc-text">unset() 函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#session-destroy-函数"><span class="post-toc-number">2.7.5.</span> <span class="post-toc-text">session_destroy() 函数</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PHP-E-mail"><span class="post-toc-number">2.8.</span> <span class="post-toc-text">PHP E-mail</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#mail-发送邮件"><span class="post-toc-number">2.8.1.</span> <span class="post-toc-text">mail() 发送邮件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#防止-email-注入（使用-PHP-过滤器）"><span class="post-toc-number">2.8.2.</span> <span class="post-toc-text">防止 email 注入（使用 PHP 过滤器）</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PHP-Error"><span class="post-toc-number">2.9.</span> <span class="post-toc-text">PHP Error</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#die-函数：基本的错误处理"><span class="post-toc-number">2.9.1.</span> <span class="post-toc-text">die() 函数：基本的错误处理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#set-error-handler-：修改错误处理程序"><span class="post-toc-number">2.9.2.</span> <span class="post-toc-text">set_error_handler()：修改错误处理程序:</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建一个自定义的-Exception-类"><span class="post-toc-number">2.9.3.</span> <span class="post-toc-text">创建一个自定义的 Exception 类</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设置顶层异常处理器-（Top-Level-Exception-Handler）"><span class="post-toc-number">2.9.4.</span> <span class="post-toc-text">设置顶层异常处理器 （Top Level Exception Handler）</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PHP-Exception-过滤器"><span class="post-toc-number">2.10.</span> <span class="post-toc-text">PHP Exception 过滤器</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#函数和过滤器"><span class="post-toc-number">2.10.1.</span> <span class="post-toc-text">函数和过滤器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#验证整数"><span class="post-toc-number">2.10.2.</span> <span class="post-toc-text">验证整数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Validating-过滤器"><span class="post-toc-number">2.10.3.</span> <span class="post-toc-text">Validating 过滤器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Sanitizing-过滤器"><span class="post-toc-number">2.10.4.</span> <span class="post-toc-text">Sanitizing 过滤器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#验证表单"><span class="post-toc-number">2.10.5.</span> <span class="post-toc-text">验证表单</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#净化输入"><span class="post-toc-number">2.10.6.</span> <span class="post-toc-text">净化输入</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#过滤多个输入"><span class="post-toc-number">2.10.7.</span> <span class="post-toc-text">过滤多个输入</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#自定义数据过滤函数"><span class="post-toc-number">2.10.8.</span> <span class="post-toc-text">自定义数据过滤函数</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#PHP-表单"><span class="post-toc-number">3.</span> <span class="post-toc-text">PHP 表单</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#表单是否存在"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">表单是否存在</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#GET-和-POST"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">GET 和 POST</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#htmlspecialchars-函数"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">htmlspecialchars() 函数</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#检查函数"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">检查函数</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#输入提示（必填项未输入-格式错误等）"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">输入提示（必填项未输入/格式错误等）</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#格式验证（正则表达式）"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">格式验证（正则表达式）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#名字是否包含空格"><span class="post-toc-number">3.6.1.</span> <span class="post-toc-text">名字是否包含空格</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#邮箱"><span class="post-toc-number">3.6.2.</span> <span class="post-toc-text">邮箱</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#URL（允许斜杠-，需转义）"><span class="post-toc-number">3.6.3.</span> <span class="post-toc-text">URL（允许斜杠 /，需转义）</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#PHP-数据库"><span class="post-toc-number">4.</span> <span class="post-toc-text">PHP 数据库</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#连接数据库"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">连接数据库</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#创建数据库"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">创建数据库</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#选择数据库"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">选择数据库</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#创建表"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">创建表</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#修改表名"><span class="post-toc-number">4.5.</span> <span class="post-toc-text">修改表名</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#删除表"><span class="post-toc-number">4.6.</span> <span class="post-toc-text">删除表</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#插入数据（不分大小写）：INSERT-INTO"><span class="post-toc-number">4.7.</span> <span class="post-toc-text">插入数据（不分大小写）：INSERT INTO</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#表单数据到数据库"><span class="post-toc-number">4.8.</span> <span class="post-toc-text">表单数据到数据库</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#选取数据：SELECT"><span class="post-toc-number">4.9.</span> <span class="post-toc-text">选取数据：SELECT</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#按行读取选取的数据"><span class="post-toc-number">4.9.1.</span> <span class="post-toc-text">按行读取选取的数据</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#匹配指定条件：WHERE"><span class="post-toc-number">4.10.</span> <span class="post-toc-text">匹配指定条件：WHERE</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#修改数据：UPDATE"><span class="post-toc-number">4.11.</span> <span class="post-toc-text">修改数据：UPDATE</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#删除数据：DELETE-FROM"><span class="post-toc-number">4.12.</span> <span class="post-toc-text">删除数据：DELETE FROM</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ODBC"><span class="post-toc-number">4.13.</span> <span class="post-toc-text">ODBC</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#AJAX"><span class="post-toc-number">5.</span> <span class="post-toc-text">AJAX</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#创建-XMLHttpRequest-对象"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">创建 XMLHttpRequest 对象</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#实时搜索"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">实时搜索</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#前端-HTML"><span class="post-toc-number">5.2.1.</span> <span class="post-toc-text">前端 HTML</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#后端-JavaScript"><span class="post-toc-number">5.2.2.</span> <span class="post-toc-text">后端 JavaScript</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#其他"><span class="post-toc-number">6.</span> <span class="post-toc-text">其他</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#取网页源码"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">取网页源码</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#网址重定向"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">网址重定向</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#获取-IP"><span class="post-toc-number">6.3.</span> <span class="post-toc-text">获取 IP</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#获取时间文本"><span class="post-toc-number">6.4.</span> <span class="post-toc-text">获取时间文本</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#自制数据库模板"><span class="post-toc-number">6.5.</span> <span class="post-toc-text">自制数据库模板</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#自制表单操作模板"><span class="post-toc-number">6.6.</span> <span class="post-toc-text">自制表单操作模板</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#END"><span class="post-toc-number">7.</span> <span class="post-toc-text">END</span></a></li></ol>
        </nav>
    </aside>
   
<article id="post-PHP-学习笔记"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">PHP-学习笔记</h1>
        <div class="post-meta">
            <i class="icon icon-lg icon-calendar-o"></i>
            发表于
            <time class="post-time" title="2018-12-18 16:21:00" datetime="2018-12-18T08:21:00.000Z"  itemprop="datePublished">2018-12-18</time>

            <br id="mybreak"/>
            
	<i class="icon icon-lg icon-folder-o"></i>
	分类：<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Code/">Code</a></li></ul>


            <i>·</i>
            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>次浏览
</span>


        </div>
        <div class="post-count-custom">
            <i class="icon icon-lg icon-comment-o"></i>
            阅读本文可能花费您&nbsp;<span class="post-count">33</span>&nbsp;分钟
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="PHP-基础教程"><a href="#PHP-基础教程" class="headerlink" title="PHP 基础教程"></a>PHP 基础教程</h1><h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><h3 id="输出-echo"><a href="#输出-echo" class="headerlink" title="输出 echo"></a>输出 echo</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="keyword">echo</span> <span class="string">"Hello World!"</span>; </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<a id="more"></a>

<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="comment">// 这是单行注释</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/*这是多行注释块*</span></span><br><span class="line"><span class="comment">  *它横跨了多行*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>在 PHP 中，所有用户定义的函数、类和关键词（例如 if、else、echo 等等）都对大小写不敏感。<br>在 PHP 中，所有变量都对大小写敏感。</p>
<h3 id="支持中文"><a href="#支持中文" class="headerlink" title="支持中文"></a>支持中文</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">header(<span class="string">"Content-type: text/plain"</span>);</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>库文件、或者一些class文件等<strong>只有纯php代码</strong>的文件不推荐加结束标签</p>
<p>但是如果和 HTML 结合，不加结束标签的话会报错（PHP无法执行HTML代码）。</p>
</blockquote>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>以 $ 符号开头，其余规则同C语言<br>PHP 没有创建变量的命令，变量会在首次为其赋值时被创建</p>
<p>函数之外声明的变量拥有 Global 作用域，只能在函数以外进行访问，<strong><u>函数内不能访问</u></strong>。<br>函数内部声明的变量拥有 LOCAL 作用域，只能在函数内部进行访问。<br>global 关键词用于访问函数内的全局变量，在（函数内部）变量前面使用 global 关键词：</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  $x=<span class="number">5</span>;</span><br><span class="line">  $y=<span class="number">10</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">myTest</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">global</span> $x,$y;</span><br><span class="line">    $y=$x+$y;</span><br><span class="line">  }</span><br><span class="line">  myTest();</span><br><span class="line">  <span class="keyword">echo</span> $y; <span class="comment">// 输出 15</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><p>PHP 同时在名为 $GLOBALS[index] 的数组中存储了所有的全局变量。下标存有变量名。这个数组在函数内也可以访问，并能够用于直接更新全局变量。<br>上面的例子也可以这样写：</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myTest</span><span class="params">()</span> </span>{</span><br><span class="line">  $GLOBALS[<span class="string">'y'</span>]=$GLOBALS[<span class="string">'x'</span>]+$GLOBALS[<span class="string">'y'</span>];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>echo - 能够输出一个以上的字符串</p>
<p>print - 只能输出一个字符串，并始终返回 1</p>
<p>echo 是一个语言结构，有无括号均可使用：echo 或 echo()</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$cars=<span class="keyword">array</span>(<span class="string">"Volvo"</span>,<span class="string">"BMW"</span>,<span class="string">"SAAB"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;h1&gt;My car "</span>, <span class="string">"is a {$cars[0]}&lt;/h1&gt;"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Hello world!&lt;br&gt;"</span>;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="宏定义-define"><a href="#宏定义-define" class="headerlink" title="宏定义 define"></a>宏定义 define</h4><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="string">"username"</span>, <span class="string">"OK"</span>);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>同C系语言（但是不用声明类型，直接使用）<br>三种格式规定整数：十进制、十六进制（前缀是 0x）或八进制（前缀是 0）<br>浮点数是有小数点或指数形式的数字。<br>其余：略</p>
<h3 id="PHP对象：class（类）"><a href="#PHP对象：class（类）" class="headerlink" title="PHP对象：class（类）"></a>PHP对象：class（类）</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Car</span></span></span><br><span class="line"><span class="class">  </span>{</span><br><span class="line">    <span class="keyword">var</span> $color;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Car</span><span class="params">($color=<span class="string">"green"</span>)</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">  		<span class="keyword">$this</span>-&gt;color = $color;</span><br><span class="line">    }</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">what_color</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">  		<span class="keyword">return</span> <span class="keyword">$this</span>-&gt;color;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>可以通过把值设置为 NULL，将变量清空。</p>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><h4 id="strlen"><a href="#strlen" class="headerlink" title="strlen"></a>strlen</h4><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> strlen(<span class="string">"Hello world!"</span>); <span class="comment">//12 字符串长度</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="strpos"><a href="#strpos" class="headerlink" title="strpos"></a>strpos</h4><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> strpos(<span class="string">"Hello world!"</span>,<span class="string">"world"</span>); <span class="comment">//6 字符串检索，位置从0开始，没找到则返回false</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>字符串参考手册：<em><a href="http://www.w3school.com.cn/php/php_ref_string.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/php/php_ref_string.asp</a></em></p>
</blockquote>
<p>*<em>stripos *</em> 不区分大小写寻找</p>
<p><strong>注</strong>：由于strpos查找开头字符返回值为 0，且 false 的值也是 0，所以判断是否失败要用 ===</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (strpos(<span class="string">"Hello"</span>, <span class="string">"h"</span>) === <span class="keyword">false</span>) <span class="keyword">echo</span> <span class="string">"查找失败"</span>;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="str-replace"><a href="#str-replace" class="headerlink" title="str_replace"></a>str_replace</h4><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$s = str_replace(<span class="string">"原字符"</span>, <span class="string">"新字符"</span>, $str);</span><br></pre></td></tr></tbody></table></figure>

<h4 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h4><h5 id="正则替换"><a href="#正则替换" class="headerlink" title="正则替换"></a>正则替换</h5><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$s = preg_replace(<span class="string">"/原文本/"</span>, <span class="string">"新文本"</span>, $str);</span><br></pre></td></tr></tbody></table></figure>

<h5 id="正则匹配"><a href="#正则匹配" class="headerlink" title="正则匹配"></a>正则匹配</h5><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$pat = <span class="string">"/待匹配文本/iU"</span>; <span class="comment">// i 忽略大小写, U 禁止贪婪匹配</span></span><br><span class="line"><span class="keyword">if</span> (preg_match($pat, 待匹配文本, $ans))</span><br><span class="line">	$result = format_sql(trim($ans[<span class="number">1</span>]));</span><br></pre></td></tr></tbody></table></figure>

<h4 id="字符串中变量"><a href="#字符串中变量" class="headerlink" title="字符串中变量"></a>字符串中变量</h4><p>用单引号括住的输出，并没有解析字符串变量，而使用双引号括住的输出，则解析了变量了，输出变量的值。</p>
<p><strong>效率问题</strong></p>
<p>普遍认为，在不需要变量解析的字符串输出，用单引号速度可能会快一些。</p>
<h5 id="字符串中的表达式"><a href="#字符串中的表达式" class="headerlink" title="字符串中的表达式"></a>字符串中的表达式</h5><p>用花括号括起来 <code>${$row[0]}</code></p>
<h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><p>设置常量，使用 define() 函数。<br>三个参数：变量名，值，大小写不敏感（默认false，即区分大小写）</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  define(<span class="string">"GREETING"</span>, <span class="string">"Welcome to W3School!"</span>);</span><br><span class="line">  <span class="keyword">echo</span> GREETING;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var_dump(x)  <span class="comment">// 输出类型以及数值</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="rand-随机数"><a href="#rand-随机数" class="headerlink" title="rand() 随机数"></a>rand() 随机数</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rand(min, max);</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>如果没有确定 min 和 max ，rand() 将返回 0 到 RAND_MAX 之间的随机数</p>
</blockquote>
<h3 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h3><p><strong>ord() 函数</strong>：字符转ASCII</p>
<p><strong>chr() 函数</strong>：ASCII转字符</p>
<h2 id="PHP-运算符：同C系"><a href="#PHP-运算符：同C系" class="headerlink" title="PHP 运算符：同C系"></a>PHP 运算符：同C系</h2><ul>
<li>包括==、=+-*/%、+=、&gt;=、++自增 等<br>=== 完全相等，包括键值对的顺序相同类型相同<br>!== 不全等<br>!=和&lt;&gt;不等于<br>.        串接：    $txt1 = “Hello”   $txt2 = $txt1 . “ world!”    现在 $txt2 包含 “Hello world!”<br>.=      串接赋值：    $txt1 = “Hello”   $txt1 .= “ world!”    现在 $txt1 包含 “Hello world!”</li>
<li>and    &amp;&amp;    与<br>or    ||    或<br>xor    异或<br>!    非</li>
<li>if…else… 同C系语言<br>switch()…同C系语言（同样有case、break、default等），但是支持字符串<br>while(), do…while, for(;;)… 同C系语言</li>
</ul>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="keyword">for</span> ($x=<span class="number">0</span>; $x&lt;=<span class="number">10</span>; $x++) {</span><br><span class="line">          <span class="keyword">echo</span> <span class="string">"数字是：$x &lt;br&gt;"</span>;  } </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="foreach语句"><a href="#foreach语句" class="headerlink" title="foreach语句"></a>foreach语句</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span> ($array <span class="keyword">as</span> $value) {</span><br><span class="line">  …$value…</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="函数（函数名对大小写不敏感）"><a href="#函数（函数名对大小写不敏感）" class="headerlink" title="函数（函数名对大小写不敏感）"></a>函数（函数名对大小写不敏感）</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 函数名<span class="params">($参数)</span> </span>{ 代码; }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="可选参数"><a href="#可选参数" class="headerlink" title="可选参数"></a>可选参数</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 函数名<span class="params">($参数=默认值)</span> </span>{ <span class="keyword">return</span> 返回值; }</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">format_input</span><span class="params">($s, $blank = <span class="number">0</span>)</span> </span>{ }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">seize</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	$args = func_get_args(); <span class="comment">// 取参数列表</span></span><br><span class="line">	<span class="keyword">if</span> (func_num_args() == <span class="number">1</span>) <span class="comment">// 取参数数量</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">isset</span>($_REQUEST[$args[<span class="number">0</span>]])) <span class="comment">// 第一个参数：$args[0]</span></span><br><span class="line">			<span class="keyword">return</span> format_input($_REQUEST[$args[<span class="number">0</span>]], <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">NULL</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="comment">// 多个参数</span></span><br><span class="line">	{</span><br><span class="line">		$num = func_num_args();</span><br><span class="line">		<span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $num; $i++)</span><br><span class="line">			<span class="keyword">if</span> (!<span class="keyword">isset</span>($_REQUEST[$args[$i]])) <span class="comment">// 有一个参数不存在与表单中</span></span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">NULL</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="三种数组类型"><a href="#三种数组类型" class="headerlink" title="三种数组类型"></a>三种数组类型</h3><ol>
<li>索引数组 - 带有数字索引的数组</li>
<li>关联数组 - 带有指定键的数组</li>
<li>多维数组 - 包含一个或多个数组的数组</li>
</ol>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$cars=<span class="keyword">array</span>(<span class="string">"Volvo"</span>,<span class="string">"BMW"</span>,<span class="string">"SAAB"</span>);</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">count(数组名)  数组长度</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$age=<span class="keyword">array</span>(<span class="string">"Peter"</span>=&gt;<span class="string">"35"</span>,<span class="string">"Ben"</span>=&gt;<span class="string">"37"</span>,<span class="string">"Joe"</span>=&gt;<span class="string">"43"</span>);  <span class="comment">// 关联数组</span></span><br><span class="line">$age[<span class="string">'Peter'</span>]=<span class="string">"35"</span>;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="foreach-遍历"><a href="#foreach-遍历" class="headerlink" title="foreach 遍历"></a>foreach 遍历</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span>($age <span class="keyword">as</span> $x=&gt;$x_value) {</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">"Key="</span> . $x . <span class="string">", Value="</span> . $x_value, <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="数组排序函数"><a href="#数组排序函数" class="headerlink" title="数组排序函数"></a>数组排序函数</h3><ul>
<li>sort() - 以升序对数组排序</li>
<li>rsort() - 以降序对数组排序</li>
<li>asort() - 根据值，以升序对关联数组进行排序</li>
<li>ksort() - 根据键，以升序对关联数组进行排序</li>
<li>arsort() - 根据值，以降序对关联数组进行排序</li>
<li>krsort() - 根据键，以降序对关联数组进行排序</li>
</ul>
<h3 id="超全局变量"><a href="#超全局变量" class="headerlink" title="超全局变量"></a>超全局变量</h3><h4 id="GLOBALS"><a href="#GLOBALS" class="headerlink" title="$GLOBALS"></a>$GLOBALS</h4><ul>
<li>$GLOBALS</li>
<li>$_SERVER</li>
<li>$_REQUEST</li>
<li>$_POST</li>
<li>$_GET</li>
<li>$_FILES</li>
<li>$_ENV</li>
<li>$_COOKIE</li>
<li>$_SESSION</li>
</ul>
<p>PHP 在名为 <strong>$GLOBALS[index]</strong> 的数组中存储了所有全局变量。<br>变量的名字就是数组的键。</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">  $x = <span class="number">75</span>; </span><br><span class="line">  $y = <span class="number">25</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">addition</span><span class="params">()</span> </span>{ </span><br><span class="line">    $GLOBALS[<span class="string">'z'</span>] = $GLOBALS[<span class="string">'x'</span>] + $GLOBALS[<span class="string">'y'</span>]; </span><br><span class="line">  }</span><br><span class="line">  addition(); </span><br><span class="line">  <span class="keyword">echo</span> $z;  <span class="comment">// 100</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="SERVER"><a href="#SERVER" class="headerlink" title="$_SERVER"></a>$_SERVER</h4><p>保存关于报头、路径和脚本位置的信息。</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">echo</span> $_SERVER[<span class="string">'PHP_SELF'</span>];</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>; </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>​        <strong>元素/代码                                             描述</strong></p>
<ul>
<li>$_SERVER[‘PHP_SELF’]    返回当前执行脚本的文件名。<ul>
<li>$_SERVER[‘GATEWAY_INTERFACE’]返回服务器使用的 CGI 规范的版本。</li>
<li>$_SERVER[‘SERVER_ADDR’]返回当前运行脚本所在的服务器的 IP 地址。</li>
<li>$_SERVER[‘SERVER_NAME’]返回当前运行脚本所在的服务器的主机名（比如 <a href="http://www.w3school.com.cn）。" target="_blank" rel="noopener">www.w3school.com.cn）。</a></li>
<li>$_SERVER[‘SERVER_SOFTWARE’]返回服务器标识字符串（比如 Apache/2.2.24）。</li>
<li>$_SERVER[‘SERVER_PROTOCOL’]返回请求页面时通信协议的名称和版本（例如，“HTTP/1.0”）。</li>
<li>$_SERVER[‘REQUEST_METHOD’]返回访问页面使用的请求方法（例如 POST）。</li>
<li>$_SERVER[‘REQUEST_TIME’]返回请求开始时的时间戳（例如 1577687494）。</li>
<li>$_SERVER[‘QUERY_STRING’]返回查询字符串，如果是通过查询字符串访问此页面。</li>
<li>$_SERVER[‘HTTP_ACCEPT’]返回来自当前请求的请求头。</li>
<li>$_SERVER[‘HTTP_ACCEPT_CHARSET’]返回来自当前请求的 Accept_Charset 头（ 例如 utf-8,ISO-8859-1）</li>
<li>$_SERVER[‘HTTP_HOST’]返回来自当前请求的 Host 头。</li>
<li>$_SERVER[‘HTTP_REFERER’]返回当前页面的完整 URL（不可靠，因为不是所有用户代理都支持）。</li>
<li>$_SERVER[‘HTTPS’]是否通过安全 HTTP 协议查询脚本。</li>
<li>$_SERVER[‘REMOTE_ADDR’]返回浏览当前页面的用户的 IP 地址。</li>
<li>$_SERVER[‘REMOTE_HOST’]返回浏览当前页面的用户的主机名。</li>
<li>$_SERVER[‘REMOTE_PORT’]返回用户机器上连接到 Web 服务器所使用的端口号。</li>
<li>$_SERVER[‘SCRIPT_FILENAME’]返回当前执行脚本的绝对路径。</li>
<li>$_SERVER[‘SERVER_ADMIN’]该值指明了 Apache 服务器配置文件中的 SERVER_ADMIN 参数。</li>
<li>$_SERVER[‘SERVER_PORT’]Web 服务器使用的端口。默认值为 “80”。</li>
<li>$_SERVER[‘SERVER_SIGNATURE’]返回服务器版本和虚拟主机名。</li>
<li>$_SERVER[‘PATH_TRANSLATED’]当前脚本所在文件系统（非文档根目录）的基本路径。</li>
<li>$_SERVER[‘SCRIPT_NAME’]返回当前脚本的路径。</li>
<li>$_SERVER[‘SCRIPT_URI’]返回当前页面的 URI。</li>
</ul>
</li>
</ul>
<h4 id="REQUEST"><a href="#REQUEST" class="headerlink" title="$_REQUEST"></a>$_REQUEST</h4><p>用于收集 HTML 表单提交的数据。</p>
<p>例：输入name，点提交，下方出现输入的name</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt; &lt;body&gt;</span><br><span class="line"> &lt;form method="post" </span><br><span class="line">       action="&lt;?php echo $_SERVER['PHP_SELF'];?&gt;" &gt; </span><br><span class="line">	Name: &lt;input type="text" name="fname"&gt;</span><br><span class="line"> 	&lt;input type="submit"&gt;</span><br><span class="line"> &lt;/form&gt; </span><br><span class="line"> &lt;?php</span><br><span class="line">     $name = $_REQUEST['fname'];</span><br><span class="line">     //$name = $_POST['fname'];  //$_POST，等效</span><br><span class="line">     echo $name;</span><br><span class="line"> ?&gt;</span><br><span class="line">&lt;/body&gt; &lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>使用isset()函数判断表单是否提交</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_post[<span class="string">'submit'</span>])</span><br></pre></td></tr></tbody></table></figure>

<h4 id="POST"><a href="#POST" class="headerlink" title="$_POST"></a>$_POST</h4><p>广泛用于收集提交 method=”post” 的 HTML 表单后的表单数据。<br>也常用于传递变量。<br>实例见上。</p>
<ul>
<li>$_GET 也可用于收集提交 HTML 表单 (method=”get”) 之后的表单数据。</li>
<li>$_GET 也可以收集 URL 中的发送的数据。</li>
</ul>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;&lt;body&gt;</span><br><span class="line">  &lt;a href="test_get.php?subject=PHP&amp;web=W3school.com.cn"&gt;</span><br><span class="line">    测试 $GET&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;&lt;body&gt;</span><br><span class="line">  &lt;?php </span><br><span class="line">  	echo "Study " . $_GET['subject'] . " at " . $_GET['web'];</span><br><span class="line">  ?&gt;</span><br><span class="line">&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="常用数组函数"><a href="#常用数组函数" class="headerlink" title="常用数组函数"></a>常用数组函数</h3><ul>
<li>取数组长度：<code>count(array)</code></li>
<li>增加一个元素到结尾：<code>array_push(array, val)</code></li>
<li>是否存在某个元素：<code>in_array(val, array)</code></li>
</ul>
<h1 id="PHP-高级教程"><a href="#PHP-高级教程" class="headerlink" title="PHP 高级教程"></a>PHP 高级教程</h1><h2 id="PHP-多维数组"><a href="#PHP-多维数组" class="headerlink" title="PHP 多维数组"></a>PHP 多维数组</h2><p><strong>两维数组</strong></p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$cars = <span class="keyword">array</span> (</span><br><span class="line">  <span class="keyword">array</span>(<span class="string">"Volvo"</span>,<span class="number">22</span>,<span class="number">18</span>),</span><br><span class="line">  <span class="keyword">array</span>(<span class="string">"BMW"</span>,<span class="number">15</span>,<span class="number">13</span>),</span><br><span class="line">  <span class="keyword">array</span>(<span class="string">"Saab"</span>,<span class="number">5</span>,<span class="number">2</span>),</span><br><span class="line">  <span class="keyword">array</span>(<span class="string">"Land Rover"</span>,<span class="number">17</span>,<span class="number">15</span>)</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p>这是一个 <strong>4 行 3 列</strong> 的数组 <em>$cars[3][2]</em><br>用法：$cars[1][2] = 13</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> $cars[<span class="number">0</span>][<span class="number">0</span>].<span class="string">": 库存："</span>.$cars[<span class="number">0</span>][<span class="number">1</span>].<span class="string">", 销量："</span>.$cars[<span class="number">0</span>][<span class="number">2</span>].<span class="string">".&lt;br&gt;"</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>打印<strong>两维数组表格</strong>：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">  for ($row = 0; $row &lt; 4; $row++) {</span><br><span class="line">      echo "&lt;p&gt;&lt;b&gt;Row number $row&lt;/b&gt;&lt;/p&gt;";</span><br><span class="line">      echo "&lt;ul&gt;";</span><br><span class="line">      for ($col = 0; $col &lt; 3; $col++)</span><br><span class="line">      {</span><br><span class="line">          echo "&lt;li&gt;".$cars[$row][$col]."&lt;/li&gt;";</span><br><span class="line">       }</span><br><span class="line">      echo "&lt;/ul&gt;";</span><br><span class="line">  }</span><br><span class="line">?&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="PHP-日期"><a href="#PHP-日期" class="headerlink" title="PHP 日期"></a>PHP 日期</h2><h3 id="date-函数"><a href="#date-函数" class="headerlink" title="date() 函数"></a>date() 函数</h3><p>用于对日期或时间进行格式化</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date(format,timestamp)</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>format        必需，规定时间戳的格式，见下面。<br>timestamp可选，规定时间戳，默认当前时间日期。</p>
</blockquote>
<p>时间戳是一种字符序列，它表示具体事件发生的日期和事件。</p>
<ul>
<li><p>d - 表示月里的某天（01-31）</p>
</li>
<li><p>m - 表示月（01-12）</p>
</li>
<li><p>Y - 表示年（四位数）</p>
</li>
<li><p>1 - 表示周里的某天</p>
</li>
<li><p>h - 带有首位零的 12 小时小时格式</p>
</li>
<li><p>i - 带有首位零的分钟</p>
</li>
<li><p>s - 带有首位零的秒（00 -59）</p>
</li>
<li><p>a - 小写的午前和午后（am 或 pm）</p>
</li>
</ul>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">"今天是 "</span> . date(<span class="string">"Y-m-d"</span>) . <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"今天是 "</span> . date(<span class="string">"l"</span>); <span class="comment">// 这是小写的字母L</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"当前时间是 "</span> . date(<span class="string">"h:i:sa"</span>);</span><br></pre></td></tr></tbody></table></figure>

<h4 id="自动版权年份"><a href="#自动版权年份" class="headerlink" title="自动版权年份"></a>自动版权年份</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">© 2010-&lt;?php echo date("Y")?&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>请注意：date() 会返回服务器的当前日期/时间！</p>
</blockquote>
<h3 id="获得时区"><a href="#获得时区" class="headerlink" title="获得时区"></a>获得时区</h3><p>默认是服务器所在地点</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date_default_timezone_set(<span class="string">"Asia/Shanghai"</span>);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="mktime-函数"><a href="#mktime-函数" class="headerlink" title="mktime() 函数"></a>mktime() 函数</h3><p>返回日期的 Unix 时间戳。Unix 时间戳包含 Unix 纪元（1970 年 1 月 1 日 00:00:00 GMT）与指定时间之间的【秒数】，不考虑闰秒</p>
<p>mktime(hour,minute,second,month,day,year)</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">  $d=mktime(<span class="number">9</span>, <span class="number">12</span>, <span class="number">31</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">2015</span>);</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">"创建日期是 "</span> . date(<span class="string">"Y-m-d h:i:sa"</span>, $d);</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="strtotime-函数"><a href="#strtotime-函数" class="headerlink" title="strtotime() 函数"></a>strtotime() 函数</h3><p>用于把人类可读的字符串转换为 Unix 时间。</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strtotime(time,now)</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>time：转化格式<br>now：对比的时候（当前时间可省略）</p>
</blockquote>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  $d=strtotime(<span class="string">"10:38pm April 15 2015"</span>);</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">"创建日期是 "</span> . date(<span class="string">"Y-m-d h:i:sa"</span>, $d);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>PHP 在将字符串转换为日期这方面非常聪明，所以您能够使用各种值（<em>strtotime() 并不完美</em>）：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$d=strtotime("tomorrow");</span><br><span class="line">$d=strtotime("next Saturday");</span><br><span class="line">$d=strtotime("+3 Months");</span><br></pre></td></tr></tbody></table></figure>

<p>输出七月四日之前的天数：</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  $d1=strtotime(<span class="string">"December 31"</span>);</span><br><span class="line">  $d2=ceil(($d1-time())/<span class="number">60</span>/<span class="number">60</span>/<span class="number">24</span>);</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">"距离十二月三十一日还有："</span> . $d2 .<span class="string">" 天。"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="PHP-Include"><a href="#PHP-Include" class="headerlink" title="PHP Include"></a>PHP Include</h2><p>include （或 require）语句会获取指定文件中存在的所有文本/代码/标记，并【复制】到使用 include 语句的文件中。</p>
<p>include 和 require 是相同的，除了错误处理方面：</p>
<ul>
<li>require 会生成致命错误（E_COMPILE_ERROR）并停止脚本（必需文件）</li>
<li>include 只生成警告（E_WARNING），并且脚本会继续（不必需文件）</li>
</ul>
<p>用法：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php include 'footer.php';?&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>可以直接使用引用文件的变量（尽量使用安全的require，否则文件及其变量可能不存在）</p>
<h2 id="PHP-文件"><a href="#PHP-文件" class="headerlink" title="PHP 文件"></a>PHP 文件</h2><h3 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> readfile(<span class="string">"a.txt"</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>fopen() 的第一个参数包含被打开的文件名，第二个参数规定打开文件的模式。</p>
<p>如果 fopen() 函数未能打开指定的文件，下面的例子会生成一段消息：</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  $myfile = fopen(<span class="string">"a.txt"</span>, <span class="string">"r"</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">"Unable!"</span>);</span><br><span class="line">  <span class="keyword">echo</span> fread($myfile,filesize(<span class="string">"a.txt"</span>));</span><br><span class="line">  fclose($myfile);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>文件会以如下模式之一打开：</p>
<ul>
<li>r      只读。文件指针在文件的开头开始。<ul>
<li>w 只写。删除文件的内容或创建一个新的文件，如果它不存在。文件指针在文件的开头开始。</li>
<li>a只写。文件中的现有数据会被保留。文件指针在文件结尾开始。创建新的文件，如果文件不存在。</li>
<li>x创建新文件为只写。返回 FALSE 和错误，如果文件已存在。</li>
<li>r+读/写、文件指针在文件开头开始。</li>
<li>w+ 读/写。删除文件内容或创建新文件，如果它不存在。文件指针在文件开头开始。</li>
<li>a+读/写。文件中已有的数据会被保留。文件指针在文件结尾开始。创建新文件，如果它不存在。</li>
<li>x+读/写。返回 FALSE 和错误，如果文件已存在。</li>
</ul>
</li>
</ul>
<p>fread() 的第一个参数包含待读取文件的文件名，第二个参数规定待读取的最大字节数。</p>
<h3 id="读取单行文件-fgets"><a href="#读取单行文件-fgets" class="headerlink" title="读取单行文件 - fgets()"></a>读取单行文件 - fgets()</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> fgets($myfile);</span><br></pre></td></tr></tbody></table></figure>

<p>调用 fgets() 函数之后，文件指针会移动到下一行。</p>
<h3 id="检查-End-Of-File-feof"><a href="#检查-End-Of-File-feof" class="headerlink" title="检查 End-Of-File - feof()"></a>检查 End-Of-File - feof()</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  $myfile = fopen(<span class="string">"a.txt"</span>, <span class="string">"r"</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">"Unable!"</span>);</span><br><span class="line">  <span class="comment">// 输出单行直到 end-of-file</span></span><br><span class="line">  <span class="keyword">while</span>(!feof($myfile)) {</span><br><span class="line">      <span class="keyword">echo</span> fgets($myfile) . <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">  }</span><br><span class="line">  fclose($myfile);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="读取单字符-fgetc"><a href="#读取单字符-fgetc" class="headerlink" title="读取单字符 - fgetc()"></a>读取单字符 - fgetc()</h3><p>用法同fgets()</p>
<h3 id="写入文件-fwrite"><a href="#写入文件-fwrite" class="headerlink" title="写入文件 - fwrite()"></a>写入文件 - fwrite()</h3><p>fwrite() 的第一个参数包含要写入的文件的文件名，第二个参数是被写的字符串。</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$myfile = fopen(<span class="string">"new.txt"</span>, <span class="string">"w"</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">"Unable!"</span>);</span><br><span class="line">$txt = <span class="string">"Bill Gates\n"</span>;</span><br><span class="line">fwrite($myfile, $txt);</span><br><span class="line">$txt = <span class="string">"Steve Jobs\n"</span>;</span><br><span class="line">fwrite($myfile, $txt);</span><br><span class="line">fclose($myfile);</span><br></pre></td></tr></tbody></table></figure>

<p>写出的文件是这样的：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Bill Gates</span><br><span class="line">Steve Jobs</span><br></pre></td></tr></tbody></table></figure>

<h2 id="PHP-文件上传"><a href="#PHP-文件上传" class="headerlink" title="PHP 文件上传"></a>PHP 文件上传</h2><h3 id="文件上传-网页端"><a href="#文件上传-网页端" class="headerlink" title="文件上传 网页端"></a>文件上传 网页端</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;&lt;body&gt;</span><br><span class="line">  &lt;form action="upload_file.php" method="post" enctype="multipart/form-data"&gt;</span><br><span class="line">  	&lt;label for="file"&gt;Filename:&lt;/label&gt;</span><br><span class="line">    &lt;input type="file" name="file" id="file" /&gt; &lt;br /&gt;</span><br><span class="line">    &lt;input type="submit" name="submit" value="Submit" /&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>&lt;form&gt; 标签的 enctype 属性规定了在提交表单时要使用哪种内容类型。在表单需要二进制数据时，比如文件内容，请使用 “multipart/form-data”。</p>
<p>&lt;input&gt; 标签的 type=”file” 属性规定了应该把输入作为文件来处理。</p>
<h3 id="上传脚本-服务端"><a href="#上传脚本-服务端" class="headerlink" title="上传脚本 服务端"></a>上传脚本 服务端</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">  if ($_FILES["file"]["error"] &gt; 0)</span><br><span class="line">  {</span><br><span class="line">  	echo "Error: " . $_FILES["file"]["error"] . "&lt;br /&gt;";</span><br><span class="line">  }</span><br><span class="line">  else</span><br><span class="line">  {</span><br><span class="line">  	echo "Upload: " . $_FILES["file"]["name"] . "&lt;br /&gt;";</span><br><span class="line">  	echo "Type: " . $_FILES["file"]["type"] . "&lt;br /&gt;";</span><br><span class="line">  	echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb&lt;br /&gt;";</span><br><span class="line">	echo "Stored in: " . $_FILES["file"]["tmp_name"];</span><br><span class="line">  }</span><br><span class="line">?&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>使用 PHP 的全局数组 $_FILES，第二个下标可以是 “<strong>name</strong>“, “<strong>type</strong>“, “<strong>size</strong>“, “<strong>tmp_name</strong>“ 或 “<strong>error</strong>“。</p>
<p>在服务器的 PHP 临时文件夹创建了一个被上传文件的<strong>临时副本</strong>，会在脚本结束时消失。<br>拷贝到另外的位置：</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (file_exists(<span class="string">"upload/"</span> . $_FILES[<span class="string">"file"</span>][<span class="string">"name"</span>]))</span><br><span class="line">{</span><br><span class="line"><span class="keyword">echo</span> $_FILES[<span class="string">"file"</span>][<span class="string">"name"</span>] . <span class="string">" already exists. "</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">{</span><br><span class="line">   move_uploaded_file($_FILES[<span class="string">"file"</span>][<span class="string">"tmp_name"</span>], <span class="string">"upload/"</span> . $_FILES[<span class="string">"file"</span>][<span class="string">"name"</span>]);</span><br><span class="line">   <span class="keyword">echo</span> <span class="string">"Stored in: "</span> . <span class="string">"upload/"</span> . $_FILES[<span class="string">"file"</span>][<span class="string">"name"</span>];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="PHP-Cookies"><a href="#PHP-Cookies" class="headerlink" title="PHP Cookies"></a>PHP Cookies</h2><h3 id="setcookie-函数"><a href="#setcookie-函数" class="headerlink" title="setcookie() 函数"></a>setcookie() 函数</h3><p>用于设置 cookie。</p>
<blockquote>
<p>注释：setcookie() 函数必须位于  标签之前。</p>
</blockquote>
<p>setcookie(name, value, expire, path, domain);</p>
<p>一小时后过期：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setcookie("user", "Alex Porter", time()+3600);</span><br><span class="line">&lt;html&gt;&lt;body&gt;</span><br><span class="line">&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>cookie会自动URL编码、解码。<br>为防止 URL 编码，使用 <em>setrawcookie()</em></p>
<h3 id="COOKIE-变量"><a href="#COOKIE-变量" class="headerlink" title="$_COOKIE 变量"></a>$_COOKIE 变量</h3><p>用于取回 cookie 的值。</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> $_COOKIE[<span class="string">"user"</span>];</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A way to view all cookies</span></span><br><span class="line">print_r($_COOKIE);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="isset-函数"><a href="#isset-函数" class="headerlink" title="isset() 函数"></a>isset() 函数</h3><p>确认是否已设置了 cookie</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">isset</span>($_COOKIE[<span class="string">"user"</span>]))</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Welcome "</span> . $_COOKIE[<span class="string">"user"</span>] . <span class="string">"!&lt;br /&gt;"</span>;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Welcome guest!&lt;br /&gt;"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="删除-cookie"><a href="#删除-cookie" class="headerlink" title="删除 cookie"></a>删除 cookie</h3><p>使过期日期变更为过去的时间点。</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setcookie(<span class="string">"user"</span>, <span class="string">""</span>, time()<span class="number">-3600</span>);</span><br></pre></td></tr></tbody></table></figure>

<h2 id="PHP-Sessions"><a href="#PHP-Sessions" class="headerlink" title="PHP Sessions"></a>PHP Sessions</h2><h3 id="session-start"><a href="#session-start" class="headerlink" title="session_start()"></a>session_start()</h3><p>在您把用户信息存储到 PHP session 中之前，首先必须启动会话。<br>注释：session_start() 必须位于  标签之前：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php session_start(); ?&gt;</span><br><span class="line">&lt;html&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>上面的代码会向服务器注册用户的会话，以便您可以开始保存用户信息，同时会为用户会话分配一个 UID。</p>
<h3 id="SESSION-变量"><a href="#SESSION-变量" class="headerlink" title="$_SESSION 变量"></a>$_SESSION 变量</h3><p>存储和取回 session 变量</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">session_start();</span><br><span class="line">$_SESSION[<span class="string">'views'</span>]=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"Pageviews="</span>. $_SESSION[<span class="string">'views'</span>];</span><br></pre></td></tr></tbody></table></figure>

<h3 id="isset-函数-1"><a href="#isset-函数-1" class="headerlink" title="isset() 函数"></a>isset() 函数</h3><p>检测是否已设置 session 变量。</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_SESSION[<span class="string">'views'</span>]))</span><br><span class="line">  $_SESSION[<span class="string">'views'</span>]=$_SESSION[<span class="string">'views'</span>]+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  $_SESSION[<span class="string">'views'</span>]=<span class="number">1</span>;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="unset-函数"><a href="#unset-函数" class="headerlink" title="unset() 函数"></a>unset() 函数</h3><p>用于释放指定的 session 变量：</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="keyword">unset</span>($_SESSION[<span class="string">'views'</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="session-destroy-函数"><a href="#session-destroy-函数" class="headerlink" title="session_destroy() 函数"></a>session_destroy() 函数</h3><p>彻底终结 session (清空)：</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	session_destroy();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="PHP-E-mail"><a href="#PHP-E-mail" class="headerlink" title="PHP E-mail"></a>PHP E-mail</h2><h3 id="mail-发送邮件"><a href="#mail-发送邮件" class="headerlink" title="mail() 发送邮件"></a>mail() 发送邮件</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mail(to,subject,message,headers,parameters)</span><br></pre></td></tr></tbody></table></figure>

<p>接收者、主题、消息、[附加的标题]、[参数]</p>
<h3 id="防止-email-注入（使用-PHP-过滤器）"><a href="#防止-email-注入（使用-PHP-过滤器）" class="headerlink" title="防止 email 注入（使用 PHP 过滤器）"></a>防止 email 注入（使用 PHP 过滤器）</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">spamcheck</span><span class="params">($field)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	$field=filter_var($field, FILTER_SANITIZE_EMAIL);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(filter_var($field, FILTER_VALIDATE_EMAIL))</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">TRUE</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">FALSE</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (spamcheck($_REQUEST[<span class="string">'email'</span>])==<span class="keyword">FALSE</span>)</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">"Invalid input"</span>;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="PHP-Error"><a href="#PHP-Error" class="headerlink" title="PHP Error"></a>PHP Error</h2><h3 id="die-函数：基本的错误处理"><a href="#die-函数：基本的错误处理" class="headerlink" title="die() 函数：基本的错误处理"></a>die() 函数：基本的错误处理</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">die</span>(<span class="string">"Error&lt;br&gt;"</span>);</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">die</span>();</span><br></pre></td></tr></tbody></table></figure>

<h3 id="set-error-handler-：修改错误处理程序"><a href="#set-error-handler-：修改错误处理程序" class="headerlink" title="set_error_handler()：修改错误处理程序:"></a>set_error_handler()：修改错误处理程序:</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_error_handler(<span class="string">"customError"</span>);</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_error_handler(<span class="string">"customError"</span>,E_USER_WARNING);  <span class="comment">// 加上错误级别</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">customError</span><span class="params">($errno, $errstr)</span></span></span><br><span class="line"><span class="function">  </span>{ </span><br><span class="line">      <span class="keyword">echo</span> <span class="string">"&lt;b&gt;Error:&lt;/b&gt; [$errno] $errstr"</span>;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  set_error_handler(<span class="string">"customError"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">echo</span>($test);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>如果异常没有被捕获，而且又没用使用 set_exception_handler() 作相应的处理的话，那么将发生一个严重的错误（致命错误），并且输出 “Uncaught Exception” （未捕获异常）的错误消息。</p>
<ul>
<li><p>Try - 使用异常的函数应该位于 “try” 代码块内。如果没有触发异常，则代码将照常继续执行。但是如果异常被触发，会抛出一个异常。</p>
</li>
<li><p>Throw - 这里规定如何触发异常。每一个 “throw” 必须对应至少一个 “catch”</p>
</li>
<li><p>Catch - “catch” 代码块会捕获异常，并创建一个包含异常信息的对象</p>
</li>
</ul>
<h3 id="创建一个自定义的-Exception-类"><a href="#创建一个自定义的-Exception-类" class="headerlink" title="创建一个自定义的 Exception 类"></a>创建一个自定义的 Exception 类</h3><p>可以使用 exception 类的方法，比如 getLine() 、 getFile() 以及 getMessage()。</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">customException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span></span><br><span class="line"><span class="class"></span>{</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">errorMessage</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">    $errorMsg = <span class="string">'Error on line '</span>.<span class="keyword">$this</span>-&gt;getLine().<span class="string">' in '</span>.<span class="keyword">$this</span>-&gt;getFile().<span class="string">': &lt;b&gt;'</span>.<span class="keyword">$this</span>-&gt;getMessage().<span class="string">'&lt;/b&gt; is not a valid E-Mail address'</span>;</span><br><span class="line">    <span class="keyword">return</span> $errorMsg;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">$email = <span class="string">"someone@example...com"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">{</span><br><span class="line">  <span class="keyword">if</span>(filter_var($email, FILTER_VALIDATE_EMAIL) === <span class="keyword">FALSE</span>)</span><br><span class="line">  	<span class="keyword">throw</span> <span class="keyword">new</span> customException($email);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">catch</span> (customException $e)</span><br><span class="line">	<span class="keyword">echo</span> $e-&gt;errorMessage();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="设置顶层异常处理器-（Top-Level-Exception-Handler）"><a href="#设置顶层异常处理器-（Top-Level-Exception-Handler）" class="headerlink" title="设置顶层异常处理器 （Top Level Exception Handler）"></a>设置顶层异常处理器 （Top Level Exception Handler）</h3><p>set_exception_handler() 函数可设置处理所有未捕获异常的用户定义函数。</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">myException</span><span class="params">($exception)</span></span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">  	<span class="keyword">echo</span> <span class="string">"&lt;b&gt;Exception:&lt;/b&gt; "</span> , $exception-&gt;getMessage();</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  set_exception_handler(<span class="string">'myException'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="keyword">Exception</span>(<span class="string">'Uncaught Exception occurred'</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="PHP-Exception-过滤器"><a href="#PHP-Exception-过滤器" class="headerlink" title="PHP Exception 过滤器"></a>PHP Exception 过滤器</h2><h3 id="函数和过滤器"><a href="#函数和过滤器" class="headerlink" title="函数和过滤器"></a>函数和过滤器</h3><ul>
<li>filter_var() - 通过一个指定的过滤器来过滤单一的变量</li>
<li>filter_var_array() - 通过相同的或不同的过滤器来过滤多个变量</li>
<li>filter_input - 获取一个输入变量，并对它进行过滤</li>
<li>filter_input_array - 获取多个输入变量，并通过相同的或不同的过滤器对它们进行过滤</li>
</ul>
<h3 id="验证整数"><a href="#验证整数" class="headerlink" title="验证整数"></a>验证整数</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filter_var($int, FILTER_VALIDATE_INT)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Validating-过滤器"><a href="#Validating-过滤器" class="headerlink" title="Validating 过滤器"></a>Validating 过滤器</h3><blockquote>
<p>用于验证用户输入<br>严格的格式规则（比如 URL 或 E-Mail 验证）<br>如果成功则返回预期的类型，如果失败则返回 FALSE</p>
</blockquote>
<h3 id="Sanitizing-过滤器"><a href="#Sanitizing-过滤器" class="headerlink" title="Sanitizing 过滤器"></a>Sanitizing 过滤器</h3><blockquote>
<p>用于允许或禁止字符串中指定的字符<br>无数据格式规则<br>始终返回字符串</p>
</blockquote>
<p>选项和标志用于向指定的过滤器添加额外的过滤选项。<br>不同的过滤器有不同的选项和标志。</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  $var=<span class="number">300</span>;</span><br><span class="line"></span><br><span class="line">  $int_options = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">"options"</span>=&gt;<span class="keyword">array</span></span><br><span class="line">     ( <span class="string">"min_range"</span>=&gt;<span class="number">0</span>,</span><br><span class="line">       <span class="string">"max_range"</span>=&gt;<span class="number">256</span> )</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(!filter_var($var, FILTER_VALIDATE_INT, $int_options))</span><br><span class="line">      <span class="keyword">echo</span>(<span class="string">"Integer is not valid"</span>); <span class="comment">// 300，输出</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">echo</span>(<span class="string">"Integer is valid"</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="验证表单"><a href="#验证表单" class="headerlink" title="验证表单"></a>验证表单</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!filter_input(INPUT_GET, <span class="string">"email"</span>, FILTER_VALIDATE_EMAIL)) </span><br><span class="line">{ <span class="keyword">echo</span> <span class="string">"E-Mail is not valid"</span>; } <span class="comment">// Email不可用</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>通过 “GET” 方法传送的输入变量，<br>1、检测是否存在 “GET” 类型的 “email” 输入变量<br>2、如果存在，检测它是否是有效的邮件地址</p>
</blockquote>
<h3 id="净化输入"><a href="#净化输入" class="headerlink" title="净化输入"></a>净化输入</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!filter_has_var(INPUT_POST, <span class="string">"url"</span>))</span><br><span class="line">{ <span class="keyword">echo</span>(<span class="string">"Input type does not exist"</span>); }</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">{ $url = filter_input(INPUT_POST, <span class="string">"url"</span>, FILTER_SANITIZE_URL); }</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>通过 “POST” 方法传送的输入变量 (url)，<br>1、检测是否存在 “POST” 类型的 “url” 输入变量<br>2、如果存在此输入变量，对其进行净化（删除非法字符），并将其存储在 $url 变量中</p>
</blockquote>
<p>输入变量：”<em><a href="http://www.W3非o法ol.com.c字符n/" target="_blank" rel="noopener">http://www.W3非o法ol.com.c字符n/</a></em>“，则净化后的 $url 变量：<br><em><a href="http://www.W3School.com.cn/" target="_blank" rel="noopener">http://www.W3School.com.cn/</a></em></p>
<h3 id="过滤多个输入"><a href="#过滤多个输入" class="headerlink" title="过滤多个输入"></a>过滤多个输入</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$filters = <span class="keyword">array</span></span><br><span class="line"> (</span><br><span class="line"> 	<span class="string">"name"</span> =&gt; <span class="keyword">array</span></span><br><span class="line"> 	  ( <span class="string">"filter"</span>=&gt;FILTER_SANITIZE_STRING  ), </span><br><span class="line">  	<span class="string">"age"</span> =&gt; <span class="keyword">array</span></span><br><span class="line">      (</span><br><span class="line">        <span class="string">"filter"</span>=&gt;FILTER_VALIDATE_INT,</span><br><span class="line">        <span class="string">"options"</span>=&gt;<span class="keyword">array</span></span><br><span class="line">           (  <span class="string">"min_range"</span>=&gt;<span class="number">1</span>,</span><br><span class="line">             <span class="string">"max_range"</span>=&gt;<span class="number">120</span></span><br><span class="line">           )</span><br><span class="line">      ),</span><br><span class="line">   <span class="string">"email"</span>=&gt; FILTER_VALIDATE_EMAIL,</span><br><span class="line"> );</span><br><span class="line"></span><br><span class="line">$result = filter_input_array(INPUT_GET, $filters);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!$result[<span class="string">"age"</span>])</span><br><span class="line">{ <span class="keyword">echo</span>(<span class="string">"Age must be a number between 1 and 120.&lt;br /&gt;"</span>); }</span><br><span class="line"><span class="keyword">elseif</span>(!$result[<span class="string">"email"</span>])</span><br><span class="line">{ <span class="keyword">echo</span>(<span class="string">"E-Mail is not valid.&lt;br /&gt;"</span>); }</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">{ <span class="keyword">echo</span>(<span class="string">"User input is valid"</span>); }</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="自定义数据过滤函数"><a href="#自定义数据过滤函数" class="headerlink" title="自定义数据过滤函数"></a>自定义数据过滤函数</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">convertSpace</span><span class="params">($string)</span></span></span><br><span class="line"><span class="function">  </span>{ <span class="keyword">return</span> str_replace(<span class="string">"_"</span>, <span class="string">" "</span>, $string); }</span><br><span class="line"></span><br><span class="line">  $string = <span class="string">"Peter_is_a_great_guy!"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">echo</span> filter_var($string, FILTER_CALLBACK, <span class="keyword">array</span>(<span class="string">"options"</span>=&gt;<span class="string">"convertSpace"</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h1 id="PHP-表单"><a href="#PHP-表单" class="headerlink" title="PHP 表单"></a>PHP 表单</h1><blockquote>
<p><strong>注意：在处理 PHP 表单时请关注安全！</strong></p>
</blockquote>
<h2 id="表单是否存在"><a href="#表单是否存在" class="headerlink" title="表单是否存在"></a>表单是否存在</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_REQUEST[$s])) { }</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_COOKIE[$s])) { }</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_POST[$s])) { }</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_GET[$s])) { }</span><br></pre></td></tr></tbody></table></figure>

<h2 id="GET-和-POST"><a href="#GET-和-POST" class="headerlink" title="GET 和 POST"></a>GET 和 POST</h2><p>者都创建数组（例如，array( key =&gt; value, key2 =&gt; value2,  …)）。此数组包含键/值对，其中的键是表单控件的名称，而值是来自用户的输入数据。</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"&lt;?php echo htmlspecialchars($_SERVER["</span><span class="attr">PHP_SELF</span>"]);?&gt;</span>"&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>作用：$_SERVER[“PHP_SELF”] 返回当前执行脚本的文件名，将表单数据发送到页面本身</p>
<h2 id="htmlspecialchars-函数"><a href="#htmlspecialchars-函数" class="headerlink" title="htmlspecialchars() 函数"></a>htmlspecialchars() 函数</h2><p>把特殊字符转换为 HTML 实体。<br>这意味着 &lt; 和 &gt; 之类的 HTML 字符会被替换为 &lt; 和 &gt; 。这样可防止攻击者通过在表单中注入 HTML 或 JavaScript 代码（跨站点脚本攻击）对代码进行利用。</p>
<p><strong>$_SERVER[“PHP_SELF”] 变量能够被黑客利用！</strong></p>
<p>假设我们的一张名为 “test_form.php” 的页面中有如下表单：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"&lt;?php echo $_SERVER["</span><span class="attr">PHP_SELF</span>"];?&gt;</span>"&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>URL：”<a href="http://www.example.com/test_form.php&quot;" target="_blank" rel="noopener">http://www.example.com/test_form.php"</a></p>
<p>上面的代码会转换为：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"test_form.php"</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>如果输入URL：<br><a href="http://www.example.com/test_form.php/%22%3E%3Cscript%3Ealert('hacked')%3C/script%3E" target="_blank" rel="noopener">http://www.example.com/test_form.php/%22%3E%3Cscript%3Ealert('hacked')%3C/script%3E</a> </p>
<p>在这种情况下，上面的代码会转换为：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"test_form.php"</span>/&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript">alert(<span class="string">'hacked'</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>这段代码加入了一段脚本和一个提示命令。并且当此页面加载后，就会执行 JavaScript 代码（用户会看到一个提示框）。<br> &lt;script&gt; 标签内能够添加任何 JavaScript 代码！</p>
<p><strong>使用 htmlspecialchars() 函数能够避免 $_SERVER[“PHP_SELF”] 被利用。</strong></p>
<p>表单代码是这样的：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"&lt;?php echo htmlspecialchars($_SERVER["</span><span class="attr">PHP_SELF</span>"]);?&gt;</span>"&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>htmlspecialchars() 函数把特殊字符转换为 HTML 实体。</strong><br>现在，如果用户试图利用 PHP_SELF 变量，会导致如下输出：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"test_form.php/"</span>&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript">alert(<span class="string">'hacked'</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>"&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>无法利用，没有危害！</p>
<p>htmlspecialchars() 函数可以使提交的代码字段不会被执行，因为会被保存为转义代码，当作普通的文本，就像这样：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;location.href(<span class="string">'http://www.hacked.com'</span>)&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>转义后的：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;lt;script&amp;gt;location.href('http://www.hacked.com')&amp;lt;/script&amp;gt;</span><br></pre></td></tr></tbody></table></figure>

<p>现在这条代码显示在页面上或 e-mail 中是安全的。</p>
<h2 id="检查函数"><a href="#检查函数" class="headerlink" title="检查函数"></a>检查函数</h2><p><strong>在用户提交该表单时，我们还要做两件事：</strong><br><strong>1.（通过 PHP trim() 函数）去除用户输入数据中不必要的字符（多余的空格、制表符、换行）</strong><br><strong>2.（通过 PHP stripslashes() 函数）删除用户输入数据中的反斜杠（\）</strong></p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义变量并设置为空值</span></span><br><span class="line">$name = $email = $gender = $comment = $website = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">if</span> ($_SERVER[<span class="string">"REQUEST_METHOD"</span>] == <span class="string">"POST"</span>) { <span class="comment">// 提交类型是否POST或未提交</span></span><br><span class="line">    $name = test_input($_POST[<span class="string">"name"</span>]);</span><br><span class="line">    $email = test_input($_POST[<span class="string">"email"</span>]);</span><br><span class="line">    $website = test_input($_POST[<span class="string">"website"</span>]);</span><br><span class="line">    $comment = test_input($_POST[<span class="string">"comment"</span>]);</span><br><span class="line">    $gender = test_input($_POST[<span class="string">"gender"</span>]);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test_input</span><span class="params">($data)</span> </span>{</span><br><span class="line">    $data = trim($data); <span class="comment">// 去空格</span></span><br><span class="line">    $data = stripslashes($data); <span class="comment">// 去转义</span></span><br><span class="line">    $data = htmlspecialchars($data); <span class="comment">// 防注入</span></span><br><span class="line">    <span class="keyword">return</span> $data;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="输入提示（必填项未输入-格式错误等）"><a href="#输入提示（必填项未输入-格式错误等）" class="headerlink" title="输入提示（必填项未输入/格式错误等）"></a>输入提示（必填项未输入/格式错误等）</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Name: &lt;input type="text" name="name" value="&lt;?php echo $name;?&gt;"&gt;</span><br><span class="line">&lt;span class="error"&gt;</span><br><span class="line">	&lt;?php echo $Msg;?&gt;</span><br><span class="line">&lt;/span&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="格式验证（正则表达式）"><a href="#格式验证（正则表达式）" class="headerlink" title="格式验证（正则表达式）"></a>格式验证（正则表达式）</h2><h3 id="名字是否包含空格"><a href="#名字是否包含空格" class="headerlink" title="名字是否包含空格"></a>名字是否包含空格</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$name = test_input($_POST[<span class="string">"name"</span>]);</span><br><span class="line"><span class="keyword">if</span> (!preg_match(<span class="string">"/^[a-zA-Z ]*$/"</span>,$name))</span><br><span class="line">{ $nameErr = <span class="string">"只允许字母和空格！"</span>; }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="邮箱"><a href="#邮箱" class="headerlink" title="邮箱"></a>邮箱</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">preg_match(<span class="string">"/([\w\-]+\@[\w\-]+\.[\w\-]+)/"</span>,$email)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="URL（允许斜杠-，需转义）"><a href="#URL（允许斜杠-，需转义）" class="headerlink" title="URL（允许斜杠 /，需转义）"></a>URL（允许斜杠 /，需转义）</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">preg_match(<span class="string">"/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&amp;@#\/%?=~_|!:,.;]*[-a-z0-9+&amp;@#\/% =~_|]/i"</span>,$website)</span><br></pre></td></tr></tbody></table></figure>

<h1 id="PHP-数据库"><a href="#PHP-数据库" class="headerlink" title="PHP 数据库"></a>PHP 数据库</h1><h2 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_connect(servername,username,password);</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>servername 默认是 “localhost:3306”<br>username 默认值是拥有服务器进程的用户的名称<br>password 默认为””</p>
</blockquote>
<h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE database_name</span><br></pre></td></tr></tbody></table></figure>

<h2 id="选择数据库"><a href="#选择数据库" class="headerlink" title="选择数据库"></a>选择数据库</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_select_db(<span class="string">"database_name"</span>, $con);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>建表、添加、选取等之前必须选择数据库</strong></p>
<h2 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE table_name</span><br><span class="line">(</span><br><span class="line">  column_name1 data_type,</span><br><span class="line">  column_name2 data_type,</span><br><span class="line">  column_name3 data_type,</span><br><span class="line">  .......</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 连接数据库</span></span><br><span class="line">$con = mysql_connect(<span class="string">"localhost"</span>,<span class="string">"peter"</span>,<span class="string">"123"</span>);</span><br><span class="line"><span class="keyword">if</span> (!$con)</span><br><span class="line">{  <span class="keyword">die</span>(<span class="string">'Could not connect: '</span> . mysql_error());  }</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建数据库</span></span><br><span class="line"><span class="keyword">if</span> (mysql_query(<span class="string">"CREATE DATABASE my_db"</span>,$con))</span><br><span class="line">{ <span class="keyword">echo</span> <span class="string">"Database created"</span>; }</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">{ <span class="keyword">echo</span> <span class="string">"Error creating: "</span> . mysql_error();  }</span><br><span class="line"></span><br><span class="line"><span class="comment">// 选择数据库后才能建表</span></span><br><span class="line">mysql_select_db(<span class="string">"my_db"</span>, $con);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建栏位</span></span><br><span class="line">$sql = <span class="string">"CREATE TABLE Persons </span></span><br><span class="line"><span class="string">(</span></span><br><span class="line"><span class="string">  // 主键 personID，不为空，自增</span></span><br><span class="line"><span class="string">  personID int NOT NULL AUTO_INCREMENT,</span></span><br><span class="line"><span class="string">  PRIMARY KEY(personID),</span></span><br><span class="line"><span class="string">  FirstName varchar(15),</span></span><br><span class="line"><span class="string">  LastName varchar(15),</span></span><br><span class="line"><span class="string">  Age int</span></span><br><span class="line"><span class="string">)"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 选择数据库后创建表</span></span><br><span class="line">mysql_query($sql,$con);</span><br><span class="line"></span><br><span class="line">mysql_close($con);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_query(<span class="string">"ALTER TABLE `$old_tablename` RENAME TO `$tablename`"</span>); <span class="comment">// 注意：是 ` ` 而不是 单引号</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_query(<span class="string">"DROP TABLE `$tablename`"</span>);</span><br></pre></td></tr></tbody></table></figure>

<h2 id="插入数据（不分大小写）：INSERT-INTO"><a href="#插入数据（不分大小写）：INSERT-INTO" class="headerlink" title="插入数据（不分大小写）：INSERT INTO"></a>插入数据（不分大小写）：INSERT INTO</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_query(<span class="string">"INSERT INTO Persons (FirstName, LastName, Age) VALUES ('Glenn', 'Quagmire', '33')"</span>);</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>注意values里面的<strong>单引号</strong>，必须要加上去。</p>
</blockquote>
<h2 id="表单数据到数据库"><a href="#表单数据到数据库" class="headerlink" title="表单数据到数据库"></a>表单数据到数据库</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$sql=<span class="string">"INSERT INTO Persons (FirstName, LastName, Age) VALUES ('$_POST[firstname]','$_POST[lastname]','$_POST[age]')"</span>;</span><br><span class="line">mysql_query($sql,$con);</span><br></pre></td></tr></tbody></table></figure>

<h2 id="选取数据：SELECT"><a href="#选取数据：SELECT" class="headerlink" title="选取数据：SELECT"></a>选取数据：SELECT</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$result = mysql_query(<span class="string">"SELECT * FROM Persons"</span>);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="按行读取选取的数据"><a href="#按行读取选取的数据" class="headerlink" title="按行读取选取的数据"></a>按行读取选取的数据</h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_fetch_array(data,array_type);</span><br></pre></td></tr></tbody></table></figure>

<p>mysql_fetch_array() 是 mysql_fetch_row() 的扩展，不会慢很多。</p>
<p>array_type 规定返回哪种结果。可能的值：</p>
<ul>
<li>MYSQL_ASSOC - 关联数组</li>
<li>MYSQL_NUM - 数字数组</li>
<li>MYSQL_BOTH - 默认。同时产生关联和数字数组</li>
</ul>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>($row = mysql_fetch_array($result))</span><br><span class="line">{</span><br><span class="line">  <span class="keyword">echo</span> $row[<span class="string">'FirstName'</span>] . <span class="string">" "</span> . $row[<span class="string">'LastName'</span>];</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">"&lt;br /&gt;"</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="匹配指定条件：WHERE"><a href="#匹配指定条件：WHERE" class="headerlink" title="匹配指定条件：WHERE"></a>匹配指定条件：WHERE</h2><p>运算符： =   !=    &lt;   &gt;   &lt;=   &gt;=</p>
<ul>
<li><strong>BETWEEN</strong>    介于一个包含范围内</li>
<li><strong>LIKE</strong>    搜索匹配的模式</li>
</ul>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$result = mysql_query(<span class="string">"SELECT * FROM Persons WHERE FirstName='Peter'"</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>###排序</p>
<ul>
<li>排序：<strong>ORDER BY</strong><br>SELECT * FROM Persons ORDER BY age</li>
<li>默认升序，<strong>DESC</strong> 关键词降序。<br>ORDER BY column_name DESC</li>
<li>多列排序时，只有第一列相同时才使用第二列：<br>ORDER BY column_name1, column_name2</li>
</ul>
<h2 id="修改数据：UPDATE"><a href="#修改数据：UPDATE" class="headerlink" title="修改数据：UPDATE"></a>修改数据：UPDATE</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_query(<span class="string">"UPDATE Persons SET Age = '36' WHERE FirstName = 'Peter' AND LastName = 'Griffin'"</span>);</span><br></pre></td></tr></tbody></table></figure>

<h2 id="删除数据：DELETE-FROM"><a href="#删除数据：DELETE-FROM" class="headerlink" title="删除数据：DELETE FROM"></a>删除数据：DELETE FROM</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_query(<span class="string">"DELETE FROM Persons WHERE LastName='Griffin'"</span>);</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ODBC"><a href="#ODBC" class="headerlink" title="ODBC"></a>ODBC</h2><p>不多说，直接看下面的实例吧！</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">  &lt;?php</span><br><span class="line">    // 名为 northwind 的 DSN 的连接，无帐号、密码</span><br><span class="line">    $conn=odbc_connect('northwind','','');</span><br><span class="line">    if (!$conn)</span><br><span class="line">      {exit("Connection Failed: " . $conn);}</span><br><span class="line">      </span><br><span class="line">    $sql="SELECT * FROM customers";</span><br><span class="line">    $rs=odbc_exec($conn,$sql); // 查询</span><br><span class="line">    if (!$rs)</span><br><span class="line">      {exit("Error in SQL");}</span><br><span class="line">      </span><br><span class="line">    echo "&lt;table&gt;&lt;tr&gt;";</span><br><span class="line">    echo "&lt;th&gt;Companyname&lt;/th&gt;";</span><br><span class="line">    echo "&lt;th&gt;Contactname&lt;/th&gt;&lt;/tr&gt;";</span><br><span class="line"></span><br><span class="line">    while (odbc_fetch_row($rs)) // 取出</span><br><span class="line">    {</span><br><span class="line">      $compname=odbc_result($rs,"CompanyName");</span><br><span class="line">      $conname=odbc_result($rs,"ContactName");</span><br><span class="line">      echo "&lt;tr&gt;&lt;td&gt;$compname&lt;/td&gt;";</span><br><span class="line">      echo "&lt;td&gt;$conname&lt;/td&gt;&lt;/tr&gt;";</span><br><span class="line">    }</span><br><span class="line">    odbc_close($conn); // 关闭</span><br><span class="line">    echo "&lt;/table&gt;";</span><br><span class="line">  ?&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<h1 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h1><h2 id="创建-XMLHttpRequest-对象"><a href="#创建-XMLHttpRequest-对象" class="headerlink" title="创建 XMLHttpRequest 对象"></a>创建 XMLHttpRequest 对象</h2><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetXmlHttpObject</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">var</span> xmlHttp=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">         <span class="comment">// Firefox, Opera 8.0+, Safari</span></span><br><span class="line">         xmlHttp=<span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">     } <span class="keyword">catch</span> (e) {</span><br><span class="line">         <span class="comment">// Internet Explorer</span></span><br><span class="line">         <span class="keyword">try</span> {</span><br><span class="line">              xmlHttp=<span class="keyword">new</span> ActiveXObject(<span class="string">"Msxml2.XMLHTTP"</span>);</span><br><span class="line">          } <span class="keyword">catch</span> (e) {</span><br><span class="line">              xmlHttp=<span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">          }</span><br><span class="line">     }</span><br><span class="line">    <span class="keyword">return</span> xmlHttp;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="实时搜索"><a href="#实时搜索" class="headerlink" title="实时搜索"></a>实时搜索</h2><h3 id="前端-HTML"><a href="#前端-HTML" class="headerlink" title="前端 HTML"></a>前端 HTML</h3><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"clienthint.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span> </span><br><span class="line">First Name:</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"txt1"</span></span></span><br><span class="line"><span class="tag"><span class="attr">onkeyup</span>=<span class="string">"showHint(this.value)"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Suggestions: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"txtHint"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="后端-JavaScript"><a href="#后端-JavaScript" class="headerlink" title="后端 JavaScript"></a>后端 JavaScript</h3><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xmlHttp</span><br><span class="line"></span><br><span class="line"><span class="comment">// 每当在输入域中输入一个字符，该函数就会被执行一次</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showHint</span>(<span class="params">str</span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (str.length==<span class="number">0</span>)</span><br><span class="line">    { </span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">"txtHint"</span>).innerHTML=<span class="string">""</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    }</span><br><span class="line">    xmlHttp=GetXmlHttpObject()</span><br><span class="line">    <span class="keyword">if</span> (xmlHttp==<span class="literal">null</span>)</span><br><span class="line">    {</span><br><span class="line">        alert (<span class="string">"Browser does not support HTTP Request"</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    } </span><br><span class="line">    <span class="keyword">var</span> url=<span class="string">"gethint.php"</span></span><br><span class="line">    url=url+<span class="string">"?q="</span>+str</span><br><span class="line">    url=url+<span class="string">"&amp;sid="</span>+<span class="built_in">Math</span>.random()</span><br><span class="line">    xmlHttp.onreadystatechange=stateChanged </span><br><span class="line">    xmlHttp.open(<span class="string">"GET"</span>,url,<span class="literal">true</span>)</span><br><span class="line">    xmlHttp.send(<span class="literal">null</span>)</span><br><span class="line">} </span><br><span class="line"></span><br><span class="line"><span class="comment">// 每当 XMLHTTP 对象的状态发生改变，则执行该函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stateChanged</span>(<span class="params"></span>) </span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">  	<span class="comment">// 在状态变成 4 （或 "complete"）时，用响应文本填充 txtHint 占位符 txtHint 的内容</span></span><br><span class="line">    <span class="keyword">if</span> (xmlHttp.readyState==<span class="number">4</span> || xmlHttp.readyState==<span class="string">"complete"</span>)</span><br><span class="line">    { </span><br><span class="line">    	<span class="built_in">document</span>.getElementById(<span class="string">"txtHint"</span>).innerHTML=xmlHttp.responseText </span><br><span class="line">    } </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为不同浏览器创建不同 XMLHTTP 对象的问题</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetXmlHttpObject</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">var</span> xmlHttp=<span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    {</span><br><span class="line">        <span class="comment">// Firefox, Opera 8.0+, Safari</span></span><br><span class="line">        xmlHttp=<span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">catch</span> (e)</span><br><span class="line">    {</span><br><span class="line">        <span class="comment">// Internet Explorer</span></span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        {</span><br><span class="line">        	xmlHttp=<span class="keyword">new</span> ActiveXObject(<span class="string">"Msxml2.XMLHTTP"</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">catch</span> (e)</span><br><span class="line">        {</span><br><span class="line">        	xmlHttp=<span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> xmlHttp;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h2 id="取网页源码"><a href="#取网页源码" class="headerlink" title="取网页源码"></a>取网页源码</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ret = file_get_contents(<span class="string">"http://acm.hdu.edu.cn/showproblem.php?pid=1000"</span>); <span class="comment">// 取网页源码</span></span><br><span class="line">$ret = iconv(<span class="string">"gb2312"</span>, <span class="string">"utf-8//IGNORE"</span>,$ret); <span class="comment">// 避免乱码</span></span><br><span class="line"></span><br><span class="line">$pat = <span class="string">"/&lt;h1 style='color:#1A5CC8'&gt;(.+)&lt;\/h1&gt;/"</span>; <span class="comment">// 后缀：i 忽略大小写, U 禁止贪婪匹配</span></span><br><span class="line"><span class="keyword">if</span> (preg_match($pat, $ret, $ans))</span><br><span class="line">	$title = format_sql(trim($ans[<span class="number">1</span>]));</span><br></pre></td></tr></tbody></table></figure>

<h2 id="网址重定向"><a href="#网址重定向" class="headerlink" title="网址重定向"></a>网址重定向</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">header(<span class="string">"Location:"</span> . $_SERVER[<span class="string">'PHP_SELF'</span>]); <span class="comment">// 默认页面</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="获取-IP"><a href="#获取-IP" class="headerlink" title="获取 IP"></a>获取 IP</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getIP</span><span class="params">()</span> // 获取真实的<span class="title">IP</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	$ip = <span class="string">""</span>;</span><br><span class="line">	<span class="keyword">if</span> (getenv(<span class="string">'HTTP_CLIENT_IP'</span>))</span><br><span class="line">	{</span><br><span class="line">		$ip = getenv(<span class="string">'HTTP_CLIENT_IP'</span>);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">elseif</span> (getenv(<span class="string">'HTTP_X_FORWARDED_FOR'</span>))</span><br><span class="line">	{</span><br><span class="line">		$ip = getenv(<span class="string">'HTTP_X_FORWARDED_FOR'</span>);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">elseif</span> (getenv(<span class="string">'HTTP_X_FORWARDED'</span>))</span><br><span class="line">	{</span><br><span class="line">		$ip = getenv(<span class="string">'HTTP_X_FORWARDED'</span>);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">elseif</span> (getenv(<span class="string">'HTTP_FORWARDED_FOR'</span>))</span><br><span class="line">	{</span><br><span class="line">		$ip = getenv(<span class="string">'HTTP_FORWARDED_FOR'</span>);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">elseif</span> (getenv(<span class="string">'HTTP_FORWARDED'</span>))</span><br><span class="line">	{</span><br><span class="line">		$ip = getenv(<span class="string">'HTTP_FORWARDED'</span>);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		$ip = $_SERVER[<span class="string">'REMOTE_ADDR'</span>];</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> $ip;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="获取时间文本"><a href="#获取时间文本" class="headerlink" title="获取时间文本"></a>获取时间文本</h2><p>时间戳：time()</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gettime</span><span class="params">()</span> // 获取当前时间文本</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	date_default_timezone_set(<span class="string">'PRC'</span>); <span class="comment">// 临时设置成中国时区</span></span><br><span class="line">	$time = date(<span class="string">"y-m-d h:i:s"</span>, time());</span><br><span class="line">	<span class="keyword">return</span> $time;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="自制数据库模板"><a href="#自制数据库模板" class="headerlink" title="自制数据库模板"></a>自制数据库模板</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="string">"MySQL_servername"</span>, <span class="string">"localhost"</span>);</span><br><span class="line">define(<span class="string">"MySQL_username"</span>, <span class="string">"root"</span>);</span><br><span class="line">define(<span class="string">"MySQL_password"</span>, <span class="string">"root"</span>);</span><br><span class="line">define(<span class="string">"MySQL_detabase"</span>, <span class="string">"数据库名"</span>);</span><br><span class="line">$con = <span class="keyword">NULL</span>;</span><br><span class="line">$is_connected = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">connect_sql</span><span class="params">()</span> // 连接数据库</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">global</span> $con, $is_connected;</span><br><span class="line">	<span class="keyword">if</span> ($is_connected) <span class="comment">// 避免多次连接</span></span><br><span class="line">	{ <span class="keyword">return</span> <span class="keyword">NULL</span>; }</span><br><span class="line"></span><br><span class="line">	$con = mysql_connect(MySQL_servername, MySQL_username, MySQL_password);</span><br><span class="line">	<span class="keyword">if</span> (!$con)</span><br><span class="line">	{ <span class="keyword">die</span>(<span class="string">"数据库连接失败"</span>); }</span><br><span class="line"></span><br><span class="line">	$is_connected = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	mysql_select_db(MySQL_database, $con);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> $con;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">query_sql</span><span class="params">($sql)</span> // 查询语句</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">global</span> $con, $is_connected;</span><br><span class="line">	<span class="keyword">if</span> (!$is_connected)</span><br><span class="line">	{</span><br><span class="line">		connect_sql();</span><br><span class="line">		$is_connected = <span class="number">1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	$result = mysql_query($sql, $con);</span><br><span class="line">	<span class="keyword">return</span> $result;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">row_sql</span><span class="params">($sql)</span> // 查询一行，数据是否存在</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">global</span> $con, $is_connected;</span><br><span class="line">	<span class="keyword">if</span> (!$is_connected)</span><br><span class="line">	{</span><br><span class="line">		connect_sql();</span><br><span class="line">		$is_connected = <span class="number">1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> ($result = mysql_query($sql))</span><br><span class="line">	{</span><br><span class="line">		$row = mysql_fetch_array($result);</span><br><span class="line">		<span class="keyword">return</span> $row;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">NULL</span>;</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="自制表单操作模板"><a href="#自制表单操作模板" class="headerlink" title="自制表单操作模板"></a>自制表单操作模板</h2><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">seize</span><span class="params">()</span> // 函数重载吧……</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	$args = func_get_args();</span><br><span class="line">	<span class="keyword">if</span> (func_num_args() == <span class="number">1</span>) <span class="comment">// 一个，直接取值（可为空字符串）</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">isset</span>($_REQUEST[$args[<span class="number">0</span>]]))</span><br><span class="line">			<span class="keyword">return</span> format_input($_REQUEST[$args[<span class="number">0</span>]], <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">NULL</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="comment">// 多个，仅判断存不存在</span></span><br><span class="line">	{</span><br><span class="line">		$num = func_num_args();</span><br><span class="line">		<span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $num; $i++)</span><br><span class="line">			<span class="keyword">if</span> (!<span class="keyword">isset</span>($_REQUEST[$args[$i]])) <span class="comment">// 有一个没有值</span></span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">NULL</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">seizeor</span><span class="params">()</span> // 多个表单有一个就行了</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	$args = func_get_args();</span><br><span class="line">	<span class="keyword">if</span> (func_num_args() == <span class="number">1</span>) <span class="comment">// 一个，存在并返回值</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">isset</span>($_REQUEST[$args[<span class="number">0</span>]]))</span><br><span class="line">			<span class="keyword">return</span> format_input($_REQUEST[$args[<span class="number">0</span>]], <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">NULL</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="comment">// 多个，仅判断存不存在</span></span><br><span class="line">	{</span><br><span class="line">		$num = func_num_args();</span><br><span class="line">		<span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $num; $i++)</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">isset</span>($_REQUEST[$s])) <span class="comment">// 有一个没有值</span></span><br><span class="line">			{</span><br><span class="line">				<span class="keyword">return</span> format_input($_REQUEST[$args[$i]], <span class="number">1</span>);</span><br><span class="line">			}</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">NULL</span>;</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">seize0</span><span class="params">($s, $blank = <span class="number">0</span>)</span> // 获取必须存在且非空的表单，如果没有则强制退出</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">isset</span>($_REQUEST[$s]) &amp;&amp; $_REQUEST[$s] != <span class="string">""</span>)</span><br><span class="line">		<span class="keyword">return</span> format_input($_REQUEST[$s], $blank);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">die</span> ;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">seize1</span><span class="params">($s, $blank = <span class="number">0</span>)</span> // 获取一个表单</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">isset</span>($_REQUEST[$s]))</span><br><span class="line">		<span class="keyword">return</span> format_input($_REQUEST[$s], $blank);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">NULL</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">seize2</span><span class="params">($s, &amp;$a, $blank = <span class="number">0</span>)</span> // 获取表单并引用赋值</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">isset</span>($_REQUEST[$s]))</span><br><span class="line">		<span class="keyword">return</span> ($a = format_input($_REQUEST[$s], $blank));</span><br><span class="line">	<span class="comment">/*else if (isset($_COOKIE[$s]))</span></span><br><span class="line"><span class="comment">		return ($a = $s);*/</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> ($a = <span class="keyword">NULL</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">seizeval</span><span class="params">($s, $blank = <span class="number">0</span>)</span> // 获取一个非空表单，否则为<span class="title">NULL</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">isset</span>($_REQUEST[$s]) &amp;&amp; $_REQUEST[$s] != <span class="string">""</span>)</span><br><span class="line">		<span class="keyword">return</span> format_input($_REQUEST[$s], $blank);</span><br><span class="line">	<span class="comment">/*else if (isset($_COOKIE[$s]))</span></span><br><span class="line"><span class="comment">		return $s;*/</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">NULL</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">format_input</span><span class="params">($s, $blank = <span class="number">0</span>)</span> // 格式化输入内容</span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (!$blank)</span><br><span class="line">		$s = trim($s); <span class="comment">// 去空格</span></span><br><span class="line">	$s = stripslashes($s); <span class="comment">// 去转义</span></span><br><span class="line">	$s - htmlspecialchars($s); <span class="comment">// 防注入</span></span><br><span class="line">	<span class="keyword">return</span> $s;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h1 id="END"><a href="#END" class="headerlink" title="END"></a>END</h1><p>恭喜您，看完了整篇文章！</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新：<time datetime="2019-10-13T08:22:31.121Z" itemprop="dateUpdated">2019-10-13 16:22:31</time>
</span>


        
        原文链接：<a href="/2018/12/18/PHP-学习笔记/" target="_blank" rel="external">http://blog.iwxyi.com/2018/12/18/PHP-学习笔记/</a>
        
    </div>
    <footer>
        <div onclick="location.href='http://blog.iwxyi.com'">
            <img src="/img/avatar.jpg" alt="命燃芯乂">
            <a>命燃芯乂</a>
        </div>
    </footer>
</blockquote>

        
    <div class="page-reward">
        <nav class="myreward">
            <a id="rewardBtn" href="javascript:;"><span>打&nbsp;赏</span><span>装成好像很多人打赏的样子</span></a>
        </nav>
    </div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/">PHP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习笔记/">学习笔记</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.iwxyi.com/2018/12/18/PHP-学习笔记/&title=《PHP-学习笔记》 — 云笺&pic=http://blog.iwxyi.com/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.iwxyi.com/2018/12/18/PHP-学习笔记/&title=《PHP-学习笔记》 — 云笺&source=PHP 基础教程入门输出 echo123&lt;?php	echo "Hello World!"; ?&gt;" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.iwxyi.com/2018/12/18/PHP-学习笔记/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《PHP-学习笔记》 — 云笺&url=http://blog.iwxyi.com/2018/12/18/PHP-学习笔记/&via=http://blog.iwxyi.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.iwxyi.com/2018/12/18/PHP-学习笔记/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/12/19/Android-学习笔记/" id="post-prev" class="post-nav-link">
        <h4 class="title" >
          上一篇：Android-学习笔记
        </h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/12/15/Android使用高德地图/" id="post-next" class="post-nav-link">
        <h4 class="title" data-hover="下一篇：Android使用高德地图">下一篇：Android使用高德地图</h4>
      </a>
    </div>
  
</nav>



    
    

    

    
    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'true' == 'true',
            verify: 'false' == 'true',
            appId: "sVjY7bBJXEfCtStMqASgnlL6-gzGzoHsz",
            appKey: "8mL43PwxikVMVpiQx4Pq7wwt",
            avatar: "mm",
            placeholder: "留下您宝贵的建议——",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->



</article>

</div>

        <footer class="footer">
    <div class="footer-content">
        <span class="power">
            <i class="icon icon-lg icon-copyright"></i>
            2019
            <i class="icon icon-lg icon-heart"></i>
            <a href="http://blog.iwxyi.com">http://blog.iwxyi.com</a>
            <br/>
            Power by
            <a href="https://hexo.io/" target="_blank" rel="external nofollow">Hexo</a>&nbsp;·&nbsp;
            Theme
            <a class="tomotoeslink" href="https://github.com/tomotoes/hexo-theme-tomotoes/" target="_blank" rel="external nofollow">tomotoes</a>
        </span>

        <br/>

        <span id="RunTime" style="color:#a7a7a2;"></span>
        <br/>

        <span>
            
	<i class="icon icon-lg icon-user">
<span id="busuanzi_container_site_uv" style='display:none'>
       访问用户：<span id="busuanzi_value_site_uv"></span>
    </span>人</i>
    ·
    <i class="icon icon-lg icon-eye">
    <span id="busuanzi_container_site_pv" style='display:none'>
      访问次数：<span id="busuanzi_value_site_pv"></span>
    </span>次
    </i>


        </span>
        <br/>

        <span class="license"><a  target="_blank" rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">博客内容遵循 知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
    </div>
</footer>

    </main>
    
        
<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        <span>感谢您的鼓励支持！</span>
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" data-img="/img/dog.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.png">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechatPay">&nbsp;&nbsp;微信&nbsp;&nbsp;</span>
                <span class="reward-toggle-item alipayPay">支付宝</span>
            </div>
        </label>
        
        <i class="icon icon-caret-up"></i>
    </div>
</div>


    
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.iwxyi.com/2018/12/18/PHP-学习笔记/&title=《PHP-学习笔记》 — 云笺&pic=http://blog.iwxyi.com/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.iwxyi.com/2018/12/18/PHP-学习笔记/&title=《PHP-学习笔记》 — 云笺&source=PHP 基础教程入门输出 echo123&lt;?php	echo "Hello World!"; ?&gt;" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.iwxyi.com/2018/12/18/PHP-学习笔记/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《PHP-学习笔记》 — 云笺&url=http://blog.iwxyi.com/2018/12/18/PHP-学习笔记/&via=http://blog.iwxyi.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.iwxyi.com/2018/12/18/PHP-学习笔记/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p class="wechatshare">扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKklEQVR42u3aQZLCMAwFUe5/6cyWBQn9JQ9VttorioREj4XKkvx64XW9rfdvnu8k95Dvly0ZMmRsy7ge1/M95MkkxPS9H54jQ4aMAQwSRJo0766S0HlsMmTIkPF8D38OD0iGDBky1iZc/pmXqTJkyJDRKWJ58q017H5Ui8uQIWNDBg/i95//Zb4hQ4aMrRhXuNLtWpour9KSIUPG2Yy0lcZD4c/ptPZkyJAxgcEbbbXtXe1wRnpEQ4YMGXMYJNxaI6zY6OfDCRkyZIxhpD9+Dvd5I1j744qnPGTIkHEco9Ni4xu7fhksQ4aMOYxVhWja7m+VrLUpqwwZMrZl8OKTp9p0eNAZfN5OYmXIkHEQI93A8dD5SLJWyt5OYmXIkDGGkZL4NjF9YzBgkCFDxhhGukEkiZgHWiPJkCHjbMaC8WEjydaacR+uypAhYwCDH/lKzzkQEg/99i0yZMg4mpFu7NImGm/MLUjuMmTIGMDotPjT0QIvm8lfLEOGjDkMHmiaiPtXg8MWMmTIOJpRK0dXdeaDxMonsTJkyDiOkQ4Xi/PS0uAhbrfJkCHjIMYVLn4Igz+BFLpf3ihDhoyjGbUEx9MoD5FvNFspW4YMGdsy0pEAfzRPuDwRo3abDBkyDmXUEl+nod8/bCFDhgwZfLTZOXLRaee9yGUZMmSMZHQabWTTWfwjZMiQMYCRvp4XnHwjmB4gkyFDxhwGLx1rw4C1Q9PWUFOGDBn7Mf4AIxqTYWPylRIAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <!-- waves按钮特效 -->
<script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<!-- 主题配置脚本 -->
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };
</script>

<!-- jquery -->
<script src="/js/jquery.min.js?v=3.0"></script>

<!-- 搜索 -->

<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item waves-block waves-effect" onclick="location.href='{path}'">
    <div class="title ellipsis" title="{title}">{title}</div>
</li>
</template>


<!-- main博客脚本 -->
<script src="/js/main.min.js?v=3.0" ></script>

<!-- 动画&配置 -->
<script src="/js/script.min.js?v=3.0" ></script>

<!-- 脚本管理 -->
<script>

if(window.innerWidth > 800){
	/* 3D标题 */
	$(".content-header").on("mousemove", threedee);

	/* 底部追随鼠标 */
	$(".footer").hover(2);

	/* gotop键的涟漪 */
	$("#gotop").hover(1);

	/* 赞赏的粒子雨 */
	$("#reward").hover(3);

	/* 微信公众号的底部渲染 */
	$("#wechat").hover(4);

    /* 标题跳动 */
    $(".archivestitle").bumpyText();

	/* 图片点击放大 */
	const postimg = jQuery(".post-content img:not(.github-emoji)");
	postimg.on("click",function(){

		mask.classList.add("in");
		main.classList.add("Mask");
		menu.classList.add("Mask");
		var myimg = this.cloneNode(true);
		myimg.classList.add("imgShow");

		setTimeout(function(){
			jQuery(myimg).animate({
				opacity:"1"
			},1000);
		},0);

		document.body.appendChild(myimg);

		myimg.onclick=function(){
			document.body.removeChild(myimg);
			mask.classList.remove("in");
			main.classList.remove("Mask");
			menu.classList.remove("Mask");
		};

	});

}

/* 名字跳动 */
$("#name").bumpyText();


/* 网站运行时间 */
setInterval(function () {
	setTime("2019/10/11");
}, 1000);

/* 文章块的淡出 */
postshow();

/* 座右铭 */

   getHitokoto();



/* 粘贴提示 */
G($(".post-content"), location.href, "命燃芯乂");


/* 控制台 */
if (window.console && window.console.log) {
	setTimeout(function () {
		console.log("\n %c 一个坏掉的番茄 %c  © Simon Ma  http://tomotoes.com \n\n", "color:#FFFFFB;background:#1abc9c;padding:5px 0;border-radius:.5rem 0 0 .5rem;", "color:#FFFFFB;background:#080808;padding:5px 0;border-radius:0 .5rem .5rem 0;");
	}, 0);
}

</script>




<!-- 公式渲染 -->



<!-- 不蒜子 -->

<script defer src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false}});</script></body>
</html>
